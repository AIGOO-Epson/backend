### 06.09

api명세 기반으로 DB구상중.

### 06.10

일단 유저, 인증 부터 빠르게 채우는중

---

유저 가입, 로그인, 인증 완료

내일은

1. mongo 타임존 한국 설정 (필요없음)
2. 유저 엔티티에 프린터 기기id 컬럼 추가, 유저사진 추가 (완)
   해야함.

### 6.11

3. 프린트, 스캔 작업 구상(프린트는 프런트에서 할수있을거같은데)
4. 클라우드 업로드 구상(굳이 바쁜데 mock말고 제대로 해야할까.. 싶긴 한데 빨리 해놓으면 편하긴할듯) (구현까지 완)
5. text to pdf 구상 (구현까지 완) -> 결국 업로드를 하긴 해야함.
6. 한국어 text에서 문장분석 구상

   (한국어 문장분석 패키지? or 번역해서 가져올때 문장분석까지?)

7. 프런트랑 db설계 같이살펴봐야함.

업로드가, 프런트에서 날아오는 업로드는 유저프로필 사진 밖에 없을듯?

유저프로필사진 -> 프런트에서 날라옴 (구현 미룰듯? 발표에 필요없음)

스캔본 -> 앱손에서 url 날라옴 (아마도, api명세 봤을때는 그런데 교육에서는 다를수도) (스캔 api교육 받고나서 어떻게 구현할지 결정)

교육자료 -> 백에서 pdf만들어서 클라우드에 저장 (완료)

---

업로드 기능 버그) 해결 완료

업로드시 암호화 userId를 azure 컨테이너랑 디렉터리 이름으로 썼는데

특문, 대문자 때문에 다른걸로 해야함, 뭐로할지 고민중

-> 유저테이블에 uuid추가, uuid로 유저 개인 디렉터리 생성

---

1. artist 정보 테이블
2. 랜딩에서 메인에 띄울 artist 정보 + 최근편지 까지 서빙

### 6.12

기본적인 user 컨트롤러 작성중.
아티스트 정보 테이블 추가 완료.

팔로우 기능, 내 최애 등록 기능, 내 팔로우 리스트 가져오기 기능

추가해야함.

---

팔로우 CRD 구현 완료,
내 최애 등록기능이, 그냥 유저테이블에서 최애 업데이트만 하면 되긴 하는데,

고려할만한 case가 몇개 있다.

1. 팔로우 안돼 있는 아티스트를 최애로? -> 팔로우 먼저 해야함
2. 이미 최애면? -> 에러처리

아마 프런트에서 이 기능을 구현안할거같아서, 일단 보류하고 기억만 해둔다.

여기까지, 기본 유저관련, 팔로우, 아티스트 관련은 모두 완료.

이제 편지, 학습자료, 등등 관련 구현시작

근데.. 테스트는.. 한번 작성해야하긴 하는데 미친듯이 기능구현하느라 바쁜데..

테스트 작성 완, 오늘은 여기까지

### 06.13

스캔 결과 받아보는 테스트 위한 배포환경 구축,

test용 ec2 구축 완, 배포용 ecs는 계정만 일단 만들었음.

mongo, postgres 클라우드도 생성 완.

api작업은, 편지보내기 api작업 지금부터 시작.

편지보내고, 보낸편지, 받은편지 api 만들었음.

편지보내기에서 1차 db저장 완,

1. 프린터에 스캔요청은 프린터 세팅 후 테스트
2. 스캔데이터 받아온 후 처리하고 translate 모듈에 요청
3. 학습자료 생성 컨트롤러 열고 translate모듈에 요청 후 저장, get api생성까지

일단 내일은 letter 엔티티 validation 그룹지정부터

### 06.14

letter validation 이랑 swagger 완료.
letter CR api 완료

06.13 1,2,3 오늘하면 됨.
프린터가 언제될지 모르니까, 내부적으로 모킹 만들어서 traslate 모듈과 연결부터.
아.. 그전에 테스트 작성부터..

테스트 작성하다가 든 생각인데,
뭐 코드 수정, 추가해도 수정안해도 되는 테스트가 좋은 테스트

이런 말이 생각났는데, 너무 이상향 아닌가?

미래에 어떻게 요구사항이 바뀔지 모르는 상황을 예측해서 수정에 열린 견고한 테스트를 짜는 그런 얘기.

---

우아 nestjs crud에서 답변을 받았다.

READ_MANY가 제대로 안되서 질문했는데, 답변보고 해결헀다.

근데 벌써 손으로 다 작성해버렸다. 나중에 시간된다면 우아 crud로 바꿔보자.

---

letter 테스트까지 해서 메인에 올렸고,

06.13 1,2,3시작, jwt에 앱손디바이스 추가도 해야함, 디바이스 등록 api도 추가해야함.

### 06.16

스캔을 폐기해서, 파일업로드로 변경.

꽤나 견고한 업로드를 구축했음. 수동테스트를 많이했음.

이제 한국어 형태소 분석 해서 저장하는거를 sendLetter 메서드에 추가해야함.

그리고 나선 키워드 저장 만들면 됨. 키워드 받아서 ai한테 보내고,

만들어진 학습자료 받아서 이미 만들어진 pdf생성 코드로 학습자료 디자인.

일단 내일 제일먼저 할거는 리팩토링부터.

### 06.17

업로드 기능 리팩토링부터 시작

sendLetter 기능 변경해서, letter.service.spec.ts는 다시 작성해야함.

크게 눈에 밟히는 코드는 없어서 바로 키워드 저장, 학습자료 생성 구현 시작

---

다시, 스캔을 구현 시작. 체크포인트 생성
